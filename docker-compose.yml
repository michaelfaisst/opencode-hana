services:
  opencode-web:
    build: .
    ports:
      - "3000:80"
    environment:
      - VITE_OPENCODE_SERVER_URL=http://host.docker.internal:4096
    restart: unless-stopped

  # Optional: Run OpenCode server in Docker too
  # opencode:
  #   image: ghcr.io/sst/opencode:latest
  #   ports:
  #     - "4096:4096"
  #   volumes:
  #     - ./:/workspace
  #   working_dir: /workspace
  #   command: serve --port 4096 --hostname 0.0.0.0
